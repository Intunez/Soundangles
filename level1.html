<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8" />
  <title>LEVEL 1 ‚Äî Binnen of buitenhoek</title>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: Arial, sans-serif;
      background: #1d012b;
      color: #fff;
    }

    .page {
      max-width: 1100px;
      margin: 0 auto;
      padding: 20px 20px 60px;
    }

    h1 {
      margin: 0 0 5px;
      font-size: 32px;
    }

    .top-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
    }

    .small {
      font-size: 14px;
      opacity: 0.85;
    }

    .btn {
      border: none;
      border-radius: 999px;
      padding: 10px 18px;
      font-size: 14px;
      cursor: pointer;
      font-weight: 600;
    }

    .btn-primary {
      background: #ff4fd6;
      color: #fff;
    }

    .btn-primary:disabled {
      opacity: 0.5;
      cursor: default;
    }

    .btn-secondary {
      background: #2e104b;
      color: #fff;
    }

    .status-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin: 8px 0 14px;
      font-size: 14px;
      opacity: 0.9;
    }

    .status-bar span {
      margin-right: 16px;
    }

    /* SPEELVELD ------------------------------------------------------- */

    .board-wrapper {
      background: radial-gradient(circle at top left, #742c9b, #1b0227);
      border-radius: 20px;
      padding: 16px;
      box-shadow: 0 0 30px rgba(0,0,0,0.6);
    }

    .board {
      position: relative;
      border-radius: 18px;
      overflow: hidden;
      background: #170021;
      /* verhouding van juistefiguur.jpeg: 786 x 473 */
      aspect-ratio: 786 / 473;
    }

    .diagram {
      position: absolute;
      inset: 0;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .diagram-inner {
      position: relative;
      width: 100%;
      height: 100%;
    }

    .diagram-image {
      width: 100%;
      height: 100%;
      object-fit: contain;
      display: block;
      pointer-events: none;
      filter: drop-shadow(0 0 6px rgba(0,0,0,0.4));
    }

    /* Pijl die naar de hoek wijst ------------------------------------- */

    .marker-arrow {
      position: absolute;
      width: 0;
      height: 0;
      border-left: 14px solid transparent;
      border-right: 14px solid transparent;
      border-bottom: 26px solid #ff4fd6;
      filter: drop-shadow(0 0 10px rgba(255,79,214,0.8));
      opacity: 0.95;
      transition: 0.2s;
    }

    /* Posities voor de pijl ‚Äì tip ongeveer bij de boogjes.
       Deze kun je zelf nog fijn bijregelen.                        */
    .arrow-A1 { top: 40%; left: 48%; }
    .arrow-A2 { top: 26%; left: 59%; }
    .arrow-A3 { top: 43%; left: 62%; }
    .arrow-A4 { top: 52%; left: 52%; }

    .arrow-B1 { top: 62%; left: 64%; }
    .arrow-B2 { top: 68%; left: 71%; }
    .arrow-B3 { top: 77%; left: 66%; }
    .arrow-B4 { top: 83%; left: 58%; }

    /* Onderste balk --------------------------------------------------- */

    .bottom-panel {
      margin-top: 18px;
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      align-items: center;
      justify-content: space-between;
      font-size: 14px;
    }

    .music-controls {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      align-items: center;
    }

    .answer-buttons {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    .answer-btn {
      padding: 12px 22px;
      border-radius: 999px;
      border: none;
      cursor: pointer;
      background: #2e104b;
      color: #fff;
      font-size: 15px;
      min-width: 150px;
      font-weight: 600;
      transition: 0.15s;
    }

    .answer-btn.correct {
      background: #01b37e;
    }

    .answer-btn.wrong {
      background: #e53935;
    }

    .answer-btn:active {
      transform: scale(0.97);
    }

    .feedback {
      margin-top: 12px;
      min-height: 20px;
      font-size: 15px;
    }
  </style>
</head>
<body>
<div class="page">
  <div class="top-bar">
    <div>
      <h1>LEVEL 1 ‚Äî Binnen of buitenhoek</h1>
      <div class="small" id="questionText">
        Is ‚à†A1 een binnenhoek of een buitenhoek?
      </div>
    </div>
    <button class="btn btn-primary" id="restartBtn">Herstart</button>
  </div>

  <div class="status-bar">
    <div>
      <span id="progressText">Vraag 1 / 10</span>
      <span id="scoreText">Score: 0</span>
    </div>
    <button class="btn btn-primary" id="nextBtn" disabled>Volgende vraag</button>
  </div>

  <div class="board-wrapper">
    <div class="board">
      <div class="diagram">
        <div class="diagram-inner">
          <!-- JOUW FIGUUR -->
          <img src="images/juistefiguur.jpeg" alt="Hoekenfiguur" class="diagram-image">

          <!-- E√©n pijl die verplaatst wordt per vraag -->
          <div class="marker-arrow" id="markerArrow"></div>
        </div>
      </div>
    </div>
  </div>

  <div class="bottom-panel">
    <div class="music-controls">
      <button class="btn btn-secondary" id="listenBtn">üéµ Nog eens luisteren</button>
      <button class="btn btn-secondary" id="stopMusicBtn">‚èπ Stop muziek</button>
      <span class="small">Niveau 1</span>
    </div>

    <div class="answer-buttons">
      <button class="answer-btn" id="btnBinnen">Binnenhoek</button>
      <button class="answer-btn" id="btnBuiten">Buitenhoek</button>
    </div>
  </div>

  <div class="feedback" id="feedbackText"></div>
</div>

<script>
  /* =======================
     AUDIO
     ======================= */

  const binnenSources = [
    "audio/hint_major_level1.mp3",
    "audio/hint_major_level2.mp3",
    "audio/hint_major_level3.mp3",
    "audio/hint_major_level4.mp3"
  ];

  const buitenSources = [
    "audio/hint_minor_level1.mp3",
    "audio/hint_minor_level2.mp3",
    "audio/hint_minor_level3.mp3",
    "audio/hint_minor_level4.mp3"
  ];

  let currentHint = null;

  function stopCurrentHint() {
    if (currentHint) {
      currentHint.pause();
      currentHint.currentTime = 0;
      currentHint = null;
    }
  }

  function playRandomHint(type) {
    stopCurrentHint(); // eerst alles uit
    const list = type === "binnen" ? binnenSources : buitenSources;
    const index = Math.floor(Math.random() * list.length);
    currentHint = new Audio(list[index]);
    currentHint.play();
  }

  /* =======================
     VRAGEN
     ======================= */

  // Binnenhoeken: A3, A4, B1, B2
  const questions = [
    { angle: "A1", correct: "buiten" },
    { angle: "A2", correct: "buiten" },
    { angle: "A3", correct: "binnen" },
    { angle: "A4", correct: "binnen" },
    { angle: "B1", correct: "binnen" },
    { angle: "B2", correct: "binnen" },
    { angle: "B3", correct: "buiten" },
    { angle: "B4", correct: "buiten" },
    { angle: "A3", correct: "binnen" },
    { angle: "B2", correct: "binnen" }
  ];

  let currentIndex = 0;
  let score = 0;
  let answered = false;

  const questionText = document.getElementById("questionText");
  const progressText = document.getElementById("progressText");
  const scoreText = document.getElementById("scoreText");
  const feedbackText = document.getElementById("feedbackText");
  const nextBtn = document.getElementById("nextBtn");
  const restartBtn = document.getElementById("restartBtn");
  const btnBinnen = document.getElementById("btnBinnen");
  const btnBuiten = document.getElementById("btnBuiten");
  const listenBtn = document.getElementById("listenBtn");
  const stopMusicBtn = document.getElementById("stopMusicBtn");
  const markerArrow = document.getElementById("markerArrow");

  function updateArrow(angleName) {
    markerArrow.className = "marker-arrow arrow-" + angleName;
  }

  function showQuestion(index) {
    const q = questions[index];
    answered = false;

    // reset knoppen
    btnBinnen.classList.remove("correct", "wrong");
    btnBuiten.classList.remove("correct", "wrong");
    nextBtn.disabled = true;
    feedbackText.textContent = "";

    // tekst
    questionText.textContent =
      "Is ‚à†" + q.angle + " een binnenhoek of een buitenhoek?";
    progressText.textContent = "Vraag " + (index + 1) + " / " + questions.length;
    scoreText.textContent = "Score: " + score;

    // pijl verplaatsen
    updateArrow(q.angle);

    // muziek voor nieuwe vraag automatisch
    playRandomHint(q.correct);
  }

  function handleAnswer(answer) {
    if (answered) return;
    answered = true;

    const q = questions[currentIndex];
    const correct = q.correct;

    // muziek STOPPEN bij antwoord
    stopCurrentHint();

    if (answer === correct) {
      score++;
      feedbackText.textContent = "Goed gedaan! Dit is een " + correct + "hoek.";
      if (answer === "binnen") {
        btnBinnen.classList.add("correct");
      } else {
        btnBuiten.classList.add("correct");
      }
    } else {
      feedbackText.textContent =
        "Niet helemaal. Dit is een " + correct + "hoek.";
      if (answer === "binnen") {
        btnBinnen.classList.add("wrong");
      } else {
        btnBuiten.classList.add("wrong");
      }
    }

    scoreText.textContent = "Score: " + score;
    if (currentIndex < questions.length - 1) {
      nextBtn.disabled = false;
    } else {
      nextBtn.disabled = true;
      questionText.textContent += " (Laatste vraag)";
    }
  }

  btnBinnen.addEventListener("click", () => handleAnswer("binnen"));
  btnBuiten.addEventListener("click", () => handleAnswer("buiten"));

  nextBtn.addEventListener("click", () => {
    if (currentIndex < questions.length - 1) {
      currentIndex++;
      showQuestion(currentIndex);
    }
  });

  restartBtn.addEventListener("click", () => {
    currentIndex = 0;
    score = 0;
    stopCurrentHint();
    showQuestion(currentIndex);
  });

  listenBtn.addEventListener("click", () => {
    const q = questions[currentIndex];
    playRandomHint(q.correct);
  });

  stopMusicBtn.addEventListener("click", () => {
    stopCurrentHint();
  });

  // Start spel
  showQuestion(currentIndex);
</script>

</body>
</html>
